# Copyright 2025 Deutsche Telekom IT GmbH
#
# SPDX-License-Identifier: Apache-2.0

name: oauth2-with-scopes
zone: dataplane1
exposures:
  - type: api
    approval: AUTO
    visibility: ENTERPRISE
    basePath: /api/v1/scoped-service
    upstream: https://scoped-service.example.com/v1
    security:
      type: oauth2
      tokenEndpoint: https://auth.example.com/oauth2/token
      clientId: scoped-client-id
      clientSecret: scoped-client-secret
      grantType: CLIENT_CREDENTIALS
      scopes:
        - read:data
        - write:data
        - admin:metrics
subscriptions:
  - type: api
    basePath: /scoped-api/v1
    security:
      type: oauth2
      clientId: scoped-subscriber-id
      clientSecret: scoped-subscriber-secret
      grantType: CLIENT_CREDENTIALS
      scopes:
        - api:read
        - api:status
        - metrics:view