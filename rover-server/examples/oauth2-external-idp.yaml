# Copyright 2025 Deutsche Telekom IT GmbH
#
# SPDX-License-Identifier: Apache-2.0

name: oauth2-external-idp
zone: dataplane1
exposures:
  - type: api
    approval: AUTO
    visibility: ENTERPRISE
    basePath: /api/v1/example
    upstream: https://api.example.com/v1
    security:
      type: oauth2
      tokenEndpoint: https://external-idp.example.com/oauth2/token
      clientId: external-client-id
      clientSecret: external-client-secret
      grantType: CLIENT_CREDENTIALS
      tokenRequest: body
subscriptions:
  - type: api
    basePath: /external/api/v1
    security:
      type: oauth2
      tokenEndpoint: https://external-auth.example.com/oauth2/token
      clientId: my-client-id
      clientSecret: my-client-secret
      grantType: CLIENT_CREDENTIALS