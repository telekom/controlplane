# Copyright 2025 Deutsche Telekom IT GmbH
#
# SPDX-License-Identifier: Apache-2.0

# Adds namespace to all resources.
namespace: rover-system

# Value of this field is prepended to the
# names of all resources, e.g. a deployment named
# "wordpress" becomes "alices-wordpress".
# Note that it should also match with the prefix (text before '-') of the namespace
# field above.
namePrefix: rover-server-

# Labels to add to all resources and selectors.
labels:
  - includeSelectors: true
    pairs:
      domain: rover

resources:
  - ../rbac
  - ../server
  - ../ingress
  # [PROMETHEUS] To enable prometheus monitor, uncomment all sections with 'PROMETHEUS'.
  - ../prometheus
  # [METRICS] Expose the controller manager metrics service.
  - metrics_service.yaml

patches:
  # [SECRET_MANAGER] The following patch will add the secret manager to the deployment.
  - path: deployment_patch.yaml
    target:
      kind: Deployment
  - path: namespace_patch.yaml
    target:
      kind: Namespace
  # [INGRESS] The following patch allows overriding the ingress host. Adjust it as needed.
  # - path: ingress_host_patch.yaml
  #   target:
  #     kind: Ingress
  #     name: rover-server
